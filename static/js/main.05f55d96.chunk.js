(this["webpackJsonpnft-react"]=this["webpackJsonpnft-react"]||[]).push([[0],{1097:function(e,t){},1131:function(e,t){},1220:function(e,t){},1221:function(e,t){},1246:function(e,t){},1253:function(e,t){},1374:function(e,t){},1397:function(e,t){},1739:function(e,t){},1856:function(e,t){},1858:function(e,t){},1884:function(e,t){},1914:function(e,t){},1993:function(e,t){},1995:function(e,t){},2016:function(e,t){},2041:function(e,t){},2061:function(e,t,n){"use strict";n.r(t);var r=n(217),o=n.n(r),c=n(772),a=n.n(c),i=(n(803),n(804),n(8)),s=n(0),u=n.n(s),l=n(492),d=n(773),f=n(781),p=n(495),h=n(27),g=n(314),b=n(310),m=n.n(b);window.addEventListener("message",(function(e){"capturePort"===e.data&&null!=e.ports[0]&&(console.log("Port set"),window.dartCommunicationPort=e.ports[0],window.dartCommunicationPort.onmessage=function(e){console.log("Message from dart side ".concat(e.data))})}),!1);var v=function(){var e=Object(i.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(f.mapEthereumWallet)(new d.WalletConnectConnectionProvider({bridge:"https://bridge.walletconnect.org",clientMeta:{description:"WalletConnect NodeJS Client",url:"https://nodejs.org/en/",icons:["https://nodejs.org/static/images/logo.svg"],name:"WalletConnect"},rpc:{1:"https://mainnet-nethermind.blockscout.com/",3:"https://node-ropsten.rarible.com",4:"https://node-rinkeby.rarible.com",137:"https://matic-mainnet.chainstacklabs.com"},chainId:1,qrcode:!0,qrcodeModal:{open:function(e,n,r){return Object(i.a)(u.a.mark((function n(){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t(JSON.stringify({type:"LAUNCH",message:e})),console.log(e);case 2:case"end":return n.stop()}}),n)})))()},close:function(){return Object(i.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("closed method was called "),e.abrupt("return","darova");case 2:case"end":return e.stop()}}),e)})))()}},signingMethods:["eth_signTypedData_v4","eth_sendTransaction","eth_signTransaction","eth_sign","eth_signTypedData","eth_signTypedData_v1","eth_signTypedData_v2","eth_signTypedData_v3","eth_signTypedData_v4","personal_sign"]})),e.abrupt("return",l.Connector.create(n));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(i.a)(u.a.mark((function e(){var t,n,r=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:function(){console.log("connectWallet default console log")},e.next=3,v(t);case 3:return(n=e.sent).connection.subscribe(function(){var e=Object(i.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("connection: "+n.status),"connected"===n.status&&t(JSON.stringify({type:"CONNECTED",message:{address:n.connection.address}}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=7,y(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(i.a)(u.a.mark((function e(){var t,n,r,o,c,a,s,l=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:"",n=l.length>1&&void 0!==l[1]?l[1]:"Default name",r=l.length>2&&void 0!==l[2]?l[2]:"Default description",o=l.length>3&&void 0!==l[3]?l[3]:"1",c=l.length>4&&void 0!==l[4]?l[4]:"0",a=l.length>5&&void 0!==l[5]?l[5]:function(){console.log("mintAndSell default console log")},e.next=8,v(a);case 8:return(s=e.sent).connection.subscribe(function(){var e=Object(i.a)(u.a.mark((function e(i){var s,l,d,f,b,m,v,w;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,console.log("connection: "+i.status),"connected"!==i.status){e.next=54;break}return console.log("mint and sell logic started"),s="ETHEREUM:0xc9154424B823b10579895cCBE442d41b9Abd96Ed",l=Object(p.createRaribleSdk)(i.connection.wallet,"prod"),e.next=8,l.nft.generateTokenId({collection:Object(h.toContractAddress)(s),minter:Object(g.toUnionAddress)("ETHEREUM:".concat(i.connection.address))});case 8:return d=e.sent,console.log(d),e.prev=10,e.next=13,j(t,null===d||void 0===d?void 0:d.tokenId,n,r);case 13:f=e.sent,e.next=20;break;case 16:throw e.prev=16,e.t0=e.catch(10),a(JSON.stringify({type:"LOAD_TO_IPFS_ERROR",message:JSON.stringify(e.t0)})),e.t0;case 20:return e.prev=20,m={collectionId:Object(h.toContractAddress)(s),tokenId:d},e.next=24,l.nft.mint(m);case 24:return v=e.sent,a(JSON.stringify({type:"LOADED_TO_IPFS",message:null})),a(JSON.stringify({type:"LAUNCH",message:null})),console.log("ipfs url "+f),console.log("the price is ".concat(parseFloat(o))),console.log("the royalties is ".concat(parseFloat(c))),e.next=32,v.submit({uri:f,supply:1,lazyMint:!0,creators:[{account:Object(g.toUnionAddress)("ETHEREUM:".concat(i.connection.address)),value:1e4}],royalties:[{account:Object(g.toUnionAddress)("ETHEREUM:".concat(i.connection.address)),value:100*parseFloat(c)||0}]});case 32:b=e.sent,e.next=39;break;case 35:throw e.prev=35,e.t1=e.catch(20),a(JSON.stringify({type:"MINT_ERROR",message:JSON.stringify(e.t1)})),e.t1;case 39:return e.prev=39,a(JSON.stringify({type:"LAUNCH",message:null})),e.next=43,l.order.sell({itemId:b.itemId});case 43:return w=e.sent,e.next=46,w.submit({amount:1,price:parseFloat(o),currency:{"@type":"ETH"}});case 46:console.log("EVERYTHING COMPLETED"),a(JSON.stringify({type:"MINTED_AND_PUT_ON_SALE",message:{link:"https://rarible.com/token/0xc9154424B823b10579895cCBE442d41b9Abd96Ed:".concat(null===d||void 0===d?void 0:d.tokenId)}})),e.next=54;break;case 50:throw e.prev=50,e.t2=e.catch(39),a(JSON.stringify({type:"SELL_ERROR",message:JSON.stringify(e.t2)})),e.t2;case 54:e.next=60;break;case 56:e.prev=56,e.t3=e.catch(0),console.log(e.t3),a(JSON.stringify({type:"ERROR",message:JSON.stringify(e.t3.message)}));case 60:case"end":return e.stop()}}),e,null,[[0,56],[10,16],[20,35],[39,50]])})));return function(t){return e.apply(this,arguments)}}()),e.next=12,y(s);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(i.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getOptions();case 2:return n=e.sent[0],console.log(n),e.next=6,t.connect(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(i.a)(u.a.mark((function e(t,n,r,o){var c,a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={name:r,description:o,image:t,external_url:"https://rarible.com/token/0xc9154424B823b10579895cCBE442d41b9Abd96Ed:".concat(n),attributes:[]},a=new FormData,"test.json",a.append("file",new Blob([JSON.stringify(c)],{type:"text/json"}),"test.json"),e.next=6,m()({method:"post",url:"https://api.pinata.cloud/pinning/pinFileToIPFS",data:a,headers:{"Content-Type":"multipart/form-data",pinata_api_key:"54847e2d543b337f65a6",pinata_secret_api_key:"47c8bc5bf00cb106e2173ef8b51c44e54d01307a3cf5ff28efa8692484d4ffb8"}});case 6:return i=e.sent,console.log("ended json upload to ipfs "),e.abrupt("return","ipfs://ipfs/".concat(i.data.IpfsHash));case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,o){return e.apply(this,arguments)}}();window.mintAndSell=O,window.connectWallet=w,window.disconnectWallet=function(e){localStorage.setItem("walletconnect",""),e(JSON.stringify({type:"DISCONNECTED",message:null}))},window.onerror=function(e,t,n){return console.log(e,t,n),function(e){var t,n;null===(t=window)||void 0===t||null===(n=t.dartCommunicationPort)||void 0===n||n.postMessage(e)}(JSON.stringify({type:"ERROR",message:JSON.stringify(e)})),!1};var x={mintAndSell:O},E=n(1),k=n(2),N=n(3),S=n(4),_=n(97),C=function(e){Object(N.a)(n,e);var t=Object(S.a)(n);function n(e){var r,o;return Object(E.a)(this,n),(o=t.call(this,e)).timerID=void 0,o.state={web3:window.web3,ethereum:window.ethereum,web3Provider:null===(r=window.web3)||void 0===r?void 0:r.currentProvider},o.timerID=setInterval((function(){return o.tick()}),1e3),o}return Object(k.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.timerID=setInterval((function(){return e.tick()}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerID)}},{key:"tick",value:function(){var e;this.setState({web3:window.web3,ethereum:window.ethereum,web3Provider:null===(e=window.web3)||void 0===e?void 0:e.currentProvider})}},{key:"render",value:function(){return Object(_.jsxs)("div",{children:[Object(_.jsxs)("h3",{children:["Web3 exists: ",this.state.web3?"true":"false"]}),Object(_.jsxs)("h3",{children:["Ethereum exists: ",this.state.ethereum?"true":"false"]}),Object(_.jsxs)("h3",{children:["Web3 provider exists : ",this.state.web3Provider?"true":"false"]})]})}}]),n}(o.a.Component);var T=function(){return Object(_.jsx)("div",{className:"App",children:Object(_.jsxs)("header",{className:"App-header",children:[Object(_.jsxs)("p",{children:["Edit ",Object(_.jsx)("code",{children:"src/App.tsx"})," and save to reload."]}),Object(_.jsx)(C,{}),Object(_.jsx)("button",{onClick:function(){return x.mintAndSell()},children:" rarible"}),Object(_.jsx)("a",{className:"App-link",href:"https://reactjs.org",target:"_blank",rel:"noopener noreferrer",children:"Learn React"})]})})},I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,2068)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),r(e),o(e),c(e),a(e)}))};a.a.createRoot(document.getElementById("root")).render(Object(_.jsx)(o.a.StrictMode,{children:Object(_.jsx)(T,{})})),I()},651:function(e,t){},672:function(e,t){},803:function(e,t,n){},804:function(e,t,n){},813:function(e,t){},851:function(e,t){},853:function(e,t){},872:function(e,t){},874:function(e,t){},886:function(e,t){},887:function(e,t){},909:function(e,t){},916:function(e,t){},918:function(e,t){}},[[2061,1,2]]]);
//# sourceMappingURL=main.05f55d96.chunk.js.map